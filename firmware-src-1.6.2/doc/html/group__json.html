<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <title>Make Controller Kit - Firmware API: JSON</title>
  <link href="mt_doxygen.css" rel="stylesheet" type="text/css" />
  <link href="../resources/mt_doxytabs.css" rel="stylesheet" type="text/css" />
</head>

<body>
  <div id="header">
    <a href="http://www.makingthings.com">
      <img src="../resources/logo.png" alt="MakingThings" border="0"/>
    </a>
    <form id='searchbox' method="get" action="http://www.google.com/search">
      <div align="right">
        <input type="text"   name="q" size="25" maxlength="255" value="" />
        <input type="submit" value="Search" />
        <input type="hidden" name="sitesearch" value="makingthings.com/ref/firmware/html" />
      </div>
    </form>
  </div>

<!-- Generated by Doxygen 1.5.8 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>JSON<br>
<small>
[<a class="el" href="group___libraries.html">Libraries</a>]</small>
</h1>The Make Controller JSON library provides a very small and very fast library for parsing and generating json.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Data Structures</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_json_encode___state.html">JsonEncode_State</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The structure used to maintain the state of a JSON encode process.  <a href="struct_json_encode___state.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_json_decode___state.html">JsonDecode_State</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The structure used to maintain the state of a JSON decode process.  <a href="struct_json_decode___state.html#_details">More...</a><br></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#g9d87420f61e37591b1d08be556effb6d">JsonEncode_Init</a> (<a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *state)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize or reset the state of a <a class="el" href="struct_json_encode___state.html" title="The structure used to maintain the state of a JSON encode process.">JsonEncode_State</a> variable.  <a href="#g9d87420f61e37591b1d08be556effb6d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#g8d5bc99723b8f2d184cf2d10f3c0ef88">JsonEncode_ObjectOpen</a> (<a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *state, char *buf, int *remaining)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open up a new JSON object.  <a href="#g8d5bc99723b8f2d184cf2d10f3c0ef88"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#g0824a3f7dbba8ecaa02b301b8221c315">JsonEncode_ObjectKey</a> (<a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *state, char *buf, const char *key, int *remaining)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the key for a JSON object.  <a href="#g0824a3f7dbba8ecaa02b301b8221c315"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#g7cb639f090d657be17df4ca6abef0426">JsonEncode_ObjectClose</a> (<a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *state, char *buf, int *remaining)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close a JSON object.  <a href="#g7cb639f090d657be17df4ca6abef0426"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#g4c882aeaa727473d789c2beffacb6064">JsonEncode_ArrayOpen</a> (<a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *state, char *buf, int *remaining)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Open up a new JSON array.  <a href="#g4c882aeaa727473d789c2beffacb6064"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#gc8c32c6dd710da96b95f7a077ef9e99c">JsonEncode_ArrayClose</a> (<a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *state, char *buf, int *remaining)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Close an array.  <a href="#gc8c32c6dd710da96b95f7a077ef9e99c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#ge0f93189c206a35561ecfb5992a52aeb">JsonEncode_String</a> (<a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *state, char *buf, const char *string, int *remaining)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a string to the current JSON string.  <a href="#ge0f93189c206a35561ecfb5992a52aeb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#g4f34f0d00eef17538efb8883ae0873e8">JsonEncode_Int</a> (<a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *state, char *buf, int value, int *remaining)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add an int to a JSON string.  <a href="#g4f34f0d00eef17538efb8883ae0873e8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#gc6fb04bb2fcebec17ccea626ba1b175b">JsonEncode_Bool</a> (<a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *state, char *buf, bool value, int *remaining)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Add a boolean value to a JSON string.  <a href="#gc6fb04bb2fcebec17ccea626ba1b175b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#g8105aafd149efa06ed48c561b7adb84a">JsonDecode_SetIntCallback</a> (bool(*int_callback)(void *ctx, int val))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the function to be called back when an integer is parsed.  <a href="#g8105aafd149efa06ed48c561b7adb84a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#gd0c20a6e87f9e794217be0b15e4b3932">JsonDecode_SetFloatCallback</a> (bool(*float_callback)(void *ctx, float val))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the function to be called back when a float is parsed.  <a href="#gd0c20a6e87f9e794217be0b15e4b3932"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#ge73c09b8ec4d5d7c96b89f051900c534">JsonDecode_SetBoolCallback</a> (bool(*bool_callback)(void *ctx, bool val))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the function to be called back when a boolean is parsed.  <a href="#ge73c09b8ec4d5d7c96b89f051900c534"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#g7da1bf2dc58d8863a0220a0f1b7cd38f">JsonDecode_SetStringCallback</a> (bool(*string_callback)(void *ctx, char *string, int len))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the function to be called back when a string is parsed.  <a href="#g7da1bf2dc58d8863a0220a0f1b7cd38f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#gea6376da73873c87b732510d536fef11">JsonDecode_SetStartObjCallback</a> (bool(*start_obj_callback)(void *ctx))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the function to be called back when an object is started.  <a href="#gea6376da73873c87b732510d536fef11"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#g1b62c2451001efd5a9f93726aa21027a">JsonDecode_SetObjKeyCallback</a> (bool(*obj_key_callback)(void *ctx, char *key, int len))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the function to be called back when the key of a key-value pair has been encountered.  <a href="#g1b62c2451001efd5a9f93726aa21027a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#g9b8a56858bb31c59c07e9feb6e61d299">JsonDecode_SetEndObjCallback</a> (bool(*end_obj_callback)(void *ctx))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the function to be called back when an object is ended.  <a href="#g9b8a56858bb31c59c07e9feb6e61d299"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#gb94ce61762867299706aff48d2d6509f">JsonDecode_SetStartArrayCallback</a> (bool(*start_array_callback)(void *ctx))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the function to be called back when an array is started.  <a href="#gb94ce61762867299706aff48d2d6509f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#g33c8f8ab8e0114a841cb65e874049e4f">JsonDecode_SetEndArrayCallback</a> (bool(*end_array_callback)(void *ctx))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set the function to be called back when an array is ended.  <a href="#g33c8f8ab8e0114a841cb65e874049e4f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#g4e60765cc38dc83f56d092fa9b6a03c0">JsonDecode_Init</a> (<a class="el" href="struct_json_decode___state.html">JsonDecode_State</a> *state, void *context)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize or reset a <a class="el" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> variable.  <a href="#g4e60765cc38dc83f56d092fa9b6a03c0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__json.html#g2d8b7cea5cc3bb0aec425c09982d9be5">JsonDecode</a> (<a class="el" href="struct_json_decode___state.html">JsonDecode_State</a> *state, char *text, int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parse a JSON string.  <a href="#g2d8b7cea5cc3bb0aec425c09982d9be5"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
The Make Controller JSON library provides a very small and very fast library for parsing and generating json. 
<p>
From <a href="http://www.json.org:">http://www.json.org:</a> "JSON (JavaScript Object Notation) is a lightweight data-interchange format. It is easy for humans to read and write. It is easy for machines to parse and generate."<p>
JSON is quite widely used when communicating with web servers, or other network enabled devices. It's nice and small, and easy to work with. It's quite well supported in many programming environments, so it's not a bad option for a communication format when you need to talk to other devices from the Make Controller.<p>
<b>Disclaimer</b> - in an attempt to keep it as small and as simple as possible, this library is not completely full featured at the moment. It doesn't process escaped strings for you, and doesn't deal with some of the more exotic numeric representations outlined in the JSON specification. It does, however, work quite well for most other JSON tasks.<h2><a class="anchor" name="Generating">
Generating</a></h2>
Generating JSON is pretty simple - just make successive calls to the API to add the desired elements to your string.<p>
You need to provide a few things:<ul>
<li>a <a class="el" href="struct_json_encode___state.html" title="The structure used to maintain the state of a JSON encode process.">JsonEncode_State</a> variable</li><li>the buffer in which to store the JSON string being built</li><li>a count of how many bytes are left in that buffer The API will update that count, so it's not too much trouble.</li></ul>
<p>
<div class="fragment"><pre class="fragment"><span class="preprocessor">  #define MAX_JSON_LEN 256</span>
<span class="preprocessor"></span>  <span class="keywordtype">char</span> jsonbuf[MAX_JSON_LEN];
  <span class="keywordtype">int</span> remaining = MAX_JSON_LEN;
  <a class="code" href="struct_json_encode___state.html" title="The structure used to maintain the state of a JSON encode process.">JsonEncode_State</a> s;

  <span class="keywordtype">char</span> *p = jsonbuf; <span class="comment">// keep a pointer to the current location</span>
  <a class="code" href="group__json.html#g9d87420f61e37591b1d08be556effb6d" title="Initialize or reset the state of a JsonEncode_State variable.">JsonEncode_Init</a>(&amp;s); <span class="comment">// initialize our state variable</span>
  p = <a class="code" href="group__json.html#g8d5bc99723b8f2d184cf2d10f3c0ef88" title="Open up a new JSON object.">JsonEncode_ObjectOpen</a>(&amp;s, p, &amp;remaining);
  p = <a class="code" href="group__json.html#ge0f93189c206a35561ecfb5992a52aeb" title="Add a string to the current JSON string.">JsonEncode_String</a>(&amp;s, p, <span class="stringliteral">"hello"</span>, &amp;remaining);
  p = <a class="code" href="group__json.html#g4f34f0d00eef17538efb8883ae0873e8" title="Add an int to a JSON string.">JsonEncode_Int</a>(&amp;s, p, 234, &amp;remaining);
  p = <a class="code" href="group__json.html#g7cb639f090d657be17df4ca6abef0426" title="Close a JSON object.">JsonEncode_ObjectClose</a>(&amp;s, p, &amp;remaining);
  <span class="comment">// now the string in jsonbuf looks like {"hello":234} - beautifully formatted JSON</span>
  <span class="keywordtype">int</span> json_len = MAX_JSON_LEN - remaining; <span class="comment">// this is the total length of the string in jsonbuf</span>
</pre></div><p>
<b>Note</b> - the library will add the appropriate separators (: or , usually) to the string, depending on the context of the objects and arrays you've opened, or other data you've inserted.<h2><a class="anchor" name="Parsing">
Parsing</a></h2>
Parsing is done using an event-based mechanism. This means you can register for any parse events you care to hear about, and then be called back with their value as they're encountered in the JSON string. Each parse process needs its own <a class="el" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> variable to keep track of where it is.<p>
In each callback, return true to continue parsing, or return false and parsing will stop.<p>
If you need to pass around some context that you would like available in each of the callbacks, you can pass it to <a class="el" href="group__json.html#g4e60765cc38dc83f56d092fa9b6a03c0" title="Initialize or reset a JsonDecode_State variable.">JsonDecode_Init()</a> and it will be passed to each of the callbacks you've registered. Otherwise, just pass 0 if you don't need it.<p>
<div class="fragment"><pre class="fragment">  <span class="comment">// first, define the functions that we want to be called back on</span>
  <span class="keywordtype">bool</span> on_obj_opened(<span class="keywordtype">void</span>* ctx)
  {
    <span class="comment">// will be called when an object has been opened...</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// keep parsing</span>
  }
  
  <span class="keywordtype">bool</span> on_int(<span class="keywordtype">void</span> *ctx, <span class="keywordtype">int</span> val)
  {
    iny my_json_int = val;
    <span class="comment">// called when an int is encountered...</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// keep parsing</span>
  }
  
  <span class="keywordtype">bool</span> on_string(<span class="keywordtype">void</span> *ctx, <span class="keywordtype">char</span> *<span class="keywordtype">string</span>, <span class="keywordtype">int</span> len)
  {
    <span class="comment">// called when a string is encountered...</span>
    <span class="keywordflow">return</span> <span class="keyword">true</span>; <span class="comment">// keep parsing</span>
  }

  <span class="comment">// Now, register these callbacks with the JSON parser.</span>
  <a class="code" href="group__json.html#gea6376da73873c87b732510d536fef11" title="Set the function to be called back when an object is started.">JsonDecode_SetStartObjCallback</a>(on_obj_opened);
  <a class="code" href="group__json.html#g8105aafd149efa06ed48c561b7adb84a" title="Set the function to be called back when an integer is parsed.">JsonDecode_SetIntCallback</a>(on_int);
  <a class="code" href="group__json.html#g7da1bf2dc58d8863a0220a0f1b7cd38f" title="Set the function to be called back when a string is parsed.">JsonDecode_SetStringCallback</a>(on_string);

  <span class="comment">// Finally, run the parser.</span>
  <a class="code" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> s;
  <a class="code" href="group__json.html#g4e60765cc38dc83f56d092fa9b6a03c0" title="Initialize or reset a JsonDecode_State variable.">JsonDecode_Init</a>(&amp;s, 0); <span class="comment">// pass 0 if you don't need to use any special context</span>
  <span class="keywordtype">char</span> jsonstr[] = <span class="stringliteral">"[{\"label\":\"value\",\"label2\":{\"nested\":234}}]"</span>;
  <a class="code" href="group__json.html#g2d8b7cea5cc3bb0aec425c09982d9be5" title="Parse a JSON string.">JsonDecode</a>(&amp;s, jsonstr, strlen(jsonstr));
  <span class="comment">// now each of our callbacks will be triggered at the appropriate time</span>
</pre></div><p>
Thanks to YAJL (<a href="http://code.google.com/p/yajl-c">http://code.google.com/p/yajl-c</a>) for some design inspiration. <dl class="user" compact><dt><b></b></dt><dd></dd></dl>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="g2d8b7cea5cc3bb0aec425c09982d9be5"></a><!-- doxytag: member="json.c::JsonDecode" ref="g2d8b7cea5cc3bb0aec425c09982d9be5" args="(JsonDecode_State *state, char *text, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool JsonDecode           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_json_decode___state.html">JsonDecode_State</a> *&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>text</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Parse a JSON string. 
<p>
The JSON parser is event based, meaning that you will receive any callbacks you registered for as the elements are encountered in the JSON string.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>A pointer to the <a class="el" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> variable being used for this decode process. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>text</em>&nbsp;</td><td>The JSON string to parse. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>The length of the JSON string. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>True on a successful parse, false on failure.</dd></dl>
<dl class="user" compact><dt><b>Example</b></dt><dd><div class="fragment"><pre class="fragment">  <span class="comment">// quotes are escaped since I'm writing it out manually</span>
  <a class="code" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> s;
  <span class="keywordtype">char</span> jsonstr[] = <span class="stringliteral">"[{\"label\":\"value\",\"label2\":{\"nested\":234}}]"</span>;
  <a class="code" href="group__json.html#g4e60765cc38dc83f56d092fa9b6a03c0" title="Initialize or reset a JsonDecode_State variable.">JsonDecode_Init</a>(&amp;s, 0);
  <a class="code" href="group__json.html#g2d8b7cea5cc3bb0aec425c09982d9be5" title="Parse a JSON string.">JsonDecode</a>(jsonstr, strlen(jsonstr), 0); <span class="comment">// don't pass in any context</span>
  <span class="comment">// now we expect to be called back on any callbacks we registered.</span>
</pre></div> </dd></dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00753">753</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g4e60765cc38dc83f56d092fa9b6a03c0"></a><!-- doxytag: member="json.c::JsonDecode_Init" ref="g4e60765cc38dc83f56d092fa9b6a03c0" args="(JsonDecode_State *state, void *context)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JsonDecode_Init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_json_decode___state.html">JsonDecode_State</a> *&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>context</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize or reset a <a class="el" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> variable. 
<p>
Do this prior to making a call to <a class="el" href="group__json.html#g2d8b7cea5cc3bb0aec425c09982d9be5" title="Parse a JSON string.">JsonDecode()</a>. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>A pointer to the <a class="el" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> variable being used for this decode process. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>context</em>&nbsp;</td><td>An optional paramter that your code can use to pass around a known object within the callbacks. Otherwise, just set it to 0 </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00724">724</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="ge73c09b8ec4d5d7c96b89f051900c534"></a><!-- doxytag: member="json.c::JsonDecode_SetBoolCallback" ref="ge73c09b8ec4d5d7c96b89f051900c534" args="(bool(*bool_callback)(void *ctx, bool val))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JsonDecode_SetBoolCallback           </td>
          <td>(</td>
          <td class="paramtype">bool(*)(void *ctx, bool val)&nbsp;</td>
          <td class="paramname"> <em>bool_callback</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the function to be called back when a boolean is parsed. 
<p>
The function must have the format: <div class="fragment"><pre class="fragment">  <span class="keywordtype">bool</span> on_bool(<span class="keywordtype">void</span>* context, <span class="keywordtype">bool</span> value);
</pre></div> which would then be registered like so: <div class="fragment"><pre class="fragment">  <a class="code" href="group__json.html#ge73c09b8ec4d5d7c96b89f051900c534" title="Set the function to be called back when a boolean is parsed.">JsonDecode_SetBoolCallback</a>(on_bool);
</pre></div> The <b>context</b> parameter will be set to whatever you originally passed to <a class="el" href="group__json.html#g4e60765cc38dc83f56d092fa9b6a03c0" title="Initialize or reset a JsonDecode_State variable.">JsonDecode_Init()</a>. Since each <a class="el" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> can have a different context, this makes it convenient to know in your callback which one you're currently parsing.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>bool_callback</em>&nbsp;</td><td>The function to be called back. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00573">573</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g33c8f8ab8e0114a841cb65e874049e4f"></a><!-- doxytag: member="json.c::JsonDecode_SetEndArrayCallback" ref="g33c8f8ab8e0114a841cb65e874049e4f" args="(bool(*end_array_callback)(void *ctx))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JsonDecode_SetEndArrayCallback           </td>
          <td>(</td>
          <td class="paramtype">bool(*)(void *ctx)&nbsp;</td>
          <td class="paramname"> <em>end_array_callback</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the function to be called back when an array is ended. 
<p>
The right brace - ] - is the closing element of an array. The function must have the format: <div class="fragment"><pre class="fragment">  <span class="keywordtype">bool</span> on_array_ended(<span class="keywordtype">void</span>* context);
</pre></div> which would then be registered like so: <div class="fragment"><pre class="fragment">  <a class="code" href="group__json.html#g33c8f8ab8e0114a841cb65e874049e4f" title="Set the function to be called back when an array is ended.">JsonDecode_SetEndArrayCallback</a>(on_array_ended);
</pre></div> The <b>context</b> parameter will be set to whatever you originally passed to <a class="el" href="group__json.html#g4e60765cc38dc83f56d092fa9b6a03c0" title="Initialize or reset a JsonDecode_State variable.">JsonDecode_Init()</a>. Since each <a class="el" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> can have a different context, this makes it convenient to know in your callback which one you're currently parsing.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>end_array_callback</em>&nbsp;</td><td>The function to be called back. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00712">712</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g9b8a56858bb31c59c07e9feb6e61d299"></a><!-- doxytag: member="json.c::JsonDecode_SetEndObjCallback" ref="g9b8a56858bb31c59c07e9feb6e61d299" args="(bool(*end_obj_callback)(void *ctx))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JsonDecode_SetEndObjCallback           </td>
          <td>(</td>
          <td class="paramtype">bool(*)(void *ctx)&nbsp;</td>
          <td class="paramname"> <em>end_obj_callback</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the function to be called back when an object is ended. 
<p>
The right bracket - } - is the closing element of an object. The function must have the format: <div class="fragment"><pre class="fragment">  <span class="keywordtype">bool</span> on_obj_ended(<span class="keywordtype">void</span>* context);
</pre></div> which would then be registered like so: <div class="fragment"><pre class="fragment">  <a class="code" href="group__json.html#g9b8a56858bb31c59c07e9feb6e61d299" title="Set the function to be called back when an object is ended.">JsonDecode_SetEndObjCallback</a>(on_obj_ended);
</pre></div> The <b>context</b> parameter will be set to whatever you originally passed to <a class="el" href="group__json.html#g4e60765cc38dc83f56d092fa9b6a03c0" title="Initialize or reset a JsonDecode_State variable.">JsonDecode_Init()</a>. Since each <a class="el" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> can have a different context, this makes it convenient to know in your callback which one you're currently parsing.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>end_obj_callback</em>&nbsp;</td><td>The function to be called back. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00668">668</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="gd0c20a6e87f9e794217be0b15e4b3932"></a><!-- doxytag: member="json.c::JsonDecode_SetFloatCallback" ref="gd0c20a6e87f9e794217be0b15e4b3932" args="(bool(*float_callback)(void *ctx, float val))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JsonDecode_SetFloatCallback           </td>
          <td>(</td>
          <td class="paramtype">bool(*)(void *ctx, float val)&nbsp;</td>
          <td class="paramname"> <em>float_callback</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the function to be called back when a float is parsed. 
<p>
The function must have the format: <div class="fragment"><pre class="fragment">  <span class="keywordtype">bool</span> on_float(<span class="keywordtype">void</span>* context, <span class="keywordtype">float</span> value);
</pre></div> which would then be registered like so: <div class="fragment"><pre class="fragment">  <a class="code" href="group__json.html#gd0c20a6e87f9e794217be0b15e4b3932" title="Set the function to be called back when a float is parsed.">JsonDecode_SetFloatCallback</a>(on_float);
</pre></div> The <b>context</b> parameter will be set to whatever you originally passed to <a class="el" href="group__json.html#g4e60765cc38dc83f56d092fa9b6a03c0" title="Initialize or reset a JsonDecode_State variable.">JsonDecode_Init()</a>. Since each <a class="el" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> can have a different context, this makes it convenient to know in your callback which one you're currently parsing.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>float_callback</em>&nbsp;</td><td>The function to be called back. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00552">552</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g8105aafd149efa06ed48c561b7adb84a"></a><!-- doxytag: member="json.c::JsonDecode_SetIntCallback" ref="g8105aafd149efa06ed48c561b7adb84a" args="(bool(*int_callback)(void *ctx, int val))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JsonDecode_SetIntCallback           </td>
          <td>(</td>
          <td class="paramtype">bool(*)(void *ctx, int val)&nbsp;</td>
          <td class="paramname"> <em>int_callback</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the function to be called back when an integer is parsed. 
<p>
The function must have the format: <div class="fragment"><pre class="fragment">  <span class="keywordtype">bool</span> on_int(<span class="keywordtype">void</span>* context, <span class="keywordtype">int</span> value);
</pre></div> which would then be registered like so: <div class="fragment"><pre class="fragment">  <a class="code" href="group__json.html#g8105aafd149efa06ed48c561b7adb84a" title="Set the function to be called back when an integer is parsed.">JsonDecode_SetIntCallback</a>(on_int);
</pre></div> The <b>context</b> parameter will be set to whatever you originally passed to <a class="el" href="group__json.html#g4e60765cc38dc83f56d092fa9b6a03c0" title="Initialize or reset a JsonDecode_State variable.">JsonDecode_Init()</a>. Since each <a class="el" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> can have a different context, this makes it convenient to know in your callback which one you're currently parsing.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>int_callback</em>&nbsp;</td><td>The function to be called back. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00531">531</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g1b62c2451001efd5a9f93726aa21027a"></a><!-- doxytag: member="json.c::JsonDecode_SetObjKeyCallback" ref="g1b62c2451001efd5a9f93726aa21027a" args="(bool(*obj_key_callback)(void *ctx, char *key, int len))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JsonDecode_SetObjKeyCallback           </td>
          <td>(</td>
          <td class="paramtype">bool(*)(void *ctx, char *key, int len)&nbsp;</td>
          <td class="paramname"> <em>obj_key_callback</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the function to be called back when the key of a key-value pair has been encountered. 
<p>
A key must always be a string in JSON, so you'll get the string back. This is particularly helpful for setting how the next element (the value in the key-value pair) should be handled.<p>
The function must have the format: <div class="fragment"><pre class="fragment">  <span class="keywordtype">bool</span> on_obj_key(<span class="keywordtype">void</span>* context);
</pre></div> which would then be registered like so: <div class="fragment"><pre class="fragment">  <a class="code" href="group__json.html#g1b62c2451001efd5a9f93726aa21027a" title="Set the function to be called back when the key of a key-value pair has been encountered...">JsonDecode_SetObjKeyCallback</a>(on_obj_key);
</pre></div> The <b>context</b> parameter will be set to whatever you originally passed to <a class="el" href="group__json.html#g4e60765cc38dc83f56d092fa9b6a03c0" title="Initialize or reset a JsonDecode_State variable.">JsonDecode_Init()</a>. Since each <a class="el" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> can have a different context, this makes it convenient to know in your callback which one you're currently parsing.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>obj_key_callback</em>&nbsp;</td><td>The function to be called back. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00646">646</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="gb94ce61762867299706aff48d2d6509f"></a><!-- doxytag: member="json.c::JsonDecode_SetStartArrayCallback" ref="gb94ce61762867299706aff48d2d6509f" args="(bool(*start_array_callback)(void *ctx))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JsonDecode_SetStartArrayCallback           </td>
          <td>(</td>
          <td class="paramtype">bool(*)(void *ctx)&nbsp;</td>
          <td class="paramname"> <em>start_array_callback</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the function to be called back when an array is started. 
<p>
The left brace - [ - is the starting element of an array. The function must have the format: <div class="fragment"><pre class="fragment">  <span class="keywordtype">bool</span> on_array_started(<span class="keywordtype">void</span>* context);
</pre></div> which would then be registered like so: <div class="fragment"><pre class="fragment">  <a class="code" href="group__json.html#gb94ce61762867299706aff48d2d6509f" title="Set the function to be called back when an array is started.">JsonDecode_SetStartArrayCallback</a>(on_array_started);
</pre></div> The <b>context</b> parameter will be set to whatever you originally passed to <a class="el" href="group__json.html#g4e60765cc38dc83f56d092fa9b6a03c0" title="Initialize or reset a JsonDecode_State variable.">JsonDecode_Init()</a>. Since each <a class="el" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> can have a different context, this makes it convenient to know in your callback which one you're currently parsing.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>start_array_callback</em>&nbsp;</td><td>The function to be called back. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00690">690</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="gea6376da73873c87b732510d536fef11"></a><!-- doxytag: member="json.c::JsonDecode_SetStartObjCallback" ref="gea6376da73873c87b732510d536fef11" args="(bool(*start_obj_callback)(void *ctx))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JsonDecode_SetStartObjCallback           </td>
          <td>(</td>
          <td class="paramtype">bool(*)(void *ctx)&nbsp;</td>
          <td class="paramname"> <em>start_obj_callback</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the function to be called back when an object is started. 
<p>
The left bracket - { - is the opening element of an object. The function must have the format: <div class="fragment"><pre class="fragment">  <span class="keywordtype">bool</span> on_obj_started(<span class="keywordtype">void</span>* context);
</pre></div> which would then be registered like so: <div class="fragment"><pre class="fragment">  <a class="code" href="group__json.html#gea6376da73873c87b732510d536fef11" title="Set the function to be called back when an object is started.">JsonDecode_SetStartObjCallback</a>(on_obj_started);
</pre></div> The <b>context</b> parameter will be set to whatever you originally passed to <a class="el" href="group__json.html#g4e60765cc38dc83f56d092fa9b6a03c0" title="Initialize or reset a JsonDecode_State variable.">JsonDecode_Init()</a>. Since each <a class="el" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> can have a different context, this makes it convenient to know in your callback which one you're currently parsing.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>start_obj_callback</em>&nbsp;</td><td>The function to be called back. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00622">622</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g7da1bf2dc58d8863a0220a0f1b7cd38f"></a><!-- doxytag: member="json.c::JsonDecode_SetStringCallback" ref="g7da1bf2dc58d8863a0220a0f1b7cd38f" args="(bool(*string_callback)(void *ctx, char *string, int len))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JsonDecode_SetStringCallback           </td>
          <td>(</td>
          <td class="paramtype">bool(*)(void *ctx, char *string, int len)&nbsp;</td>
          <td class="paramname"> <em>string_callback</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the function to be called back when a string is parsed. 
<p>
<b>Note</b> - escaped elements in strings are respected, but not processed/removed from the string at the moment, since the internal implementation simply points to the string in the original data. If you have escaped data, you'll need to handle it in your code.<p>
The function must have the format: <div class="fragment"><pre class="fragment">  <span class="keywordtype">bool</span> on_string(<span class="keywordtype">void</span>* context, <span class="keywordtype">char</span>* <span class="keywordtype">string</span>);
</pre></div> which would then be registered like so: <div class="fragment"><pre class="fragment">  <a class="code" href="group__json.html#g7da1bf2dc58d8863a0220a0f1b7cd38f" title="Set the function to be called back when a string is parsed.">JsonDecode_SetStringCallback</a>(on_string);
</pre></div> The <b>context</b> parameter will be set to whatever you originally passed to <a class="el" href="group__json.html#g4e60765cc38dc83f56d092fa9b6a03c0" title="Initialize or reset a JsonDecode_State variable.">JsonDecode_Init()</a>. Since each <a class="el" href="struct_json_decode___state.html" title="The structure used to maintain the state of a JSON decode process.">JsonDecode_State</a> can have a different context, this makes it convenient to know in your callback which one you're currently parsing.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string_callback</em>&nbsp;</td><td>The function to be called back. </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00600">600</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="gc8c32c6dd710da96b95f7a077ef9e99c"></a><!-- doxytag: member="json.c::JsonEncode_ArrayClose" ref="gc8c32c6dd710da96b95f7a077ef9e99c" args="(JsonEncode_State *state, char *buf, int *remaining)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* JsonEncode_ArrayClose           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>remaining</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Close an array. 
<p>
Adds a closing ']' to the string. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>A pointer to the <a class="el" href="struct_json_encode___state.html" title="The structure used to maintain the state of a JSON encode process.">JsonEncode_State</a> variable being used for this encode process. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>A pointer to the buffer which contains your JSON string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remaining</em>&nbsp;</td><td>A pointer to the count of how many bytes are left in your JSON buffer. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A pointer to the JSON buffer after this element has been added, or NULL if there was no room. </dd></dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00273">273</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g4c882aeaa727473d789c2beffacb6064"></a><!-- doxytag: member="json.c::JsonEncode_ArrayOpen" ref="g4c882aeaa727473d789c2beffacb6064" args="(JsonEncode_State *state, char *buf, int *remaining)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* JsonEncode_ArrayOpen           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>remaining</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Open up a new JSON array. 
<p>
This adds an opening '[' to the json string. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>A pointer to the <a class="el" href="struct_json_encode___state.html" title="The structure used to maintain the state of a JSON encode process.">JsonEncode_State</a> variable being used for this encode process. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>A pointer to the buffer holding the JSON string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remaining</em>&nbsp;</td><td>A pointer to the count of how many bytes are left in your JSON buffer. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A pointer to the location in the JSON buffer after this element has been added, or NULL if there was no room. </dd></dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00224">224</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="gc6fb04bb2fcebec17ccea626ba1b175b"></a><!-- doxytag: member="json.c::JsonEncode_Bool" ref="gc6fb04bb2fcebec17ccea626ba1b175b" args="(JsonEncode_State *state, char *buf, bool value, int *remaining)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* JsonEncode_Bool           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>remaining</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a boolean value to a JSON string. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>A pointer to the <a class="el" href="struct_json_encode___state.html" title="The structure used to maintain the state of a JSON encode process.">JsonEncode_State</a> variable being used for this encode process. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>A pointer to the buffer containing the JSON string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>The boolean value to be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remaining</em>&nbsp;</td><td>A pointer to the count of bytes remaining in the JSON buffer. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A pointer to the JSON buffer after this element has been added, or NULL if there was no room. </dd></dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00408">408</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g9d87420f61e37591b1d08be556effb6d"></a><!-- doxytag: member="json.c::JsonEncode_Init" ref="g9d87420f61e37591b1d08be556effb6d" args="(JsonEncode_State *state)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void JsonEncode_Init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *&nbsp;</td>
          <td class="paramname"> <em>state</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialize or reset the state of a <a class="el" href="struct_json_encode___state.html" title="The structure used to maintain the state of a JSON encode process.">JsonEncode_State</a> variable. 
<p>
Be sure to do this each time before you start parsing. 
<p>Definition at line <a class="el" href="json_8c-source.html#l00129">129</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g4f34f0d00eef17538efb8883ae0873e8"></a><!-- doxytag: member="json.c::JsonEncode_Int" ref="g4f34f0d00eef17538efb8883ae0873e8" args="(JsonEncode_State *state, char *buf, int value, int *remaining)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* JsonEncode_Int           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>value</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>remaining</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add an int to a JSON string. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>A pointer to the <a class="el" href="struct_json_encode___state.html" title="The structure used to maintain the state of a JSON encode process.">JsonEncode_State</a> variable being used for this encode process. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>A pointer to the buffer containing the JSON string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>value</em>&nbsp;</td><td>The integer to be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remaining</em>&nbsp;</td><td>A pointer to the count of bytes remaining in the JSON buffer. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A pointer to the JSON buffer after this element has been added, or NULL if there was no room. </dd></dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00351">351</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g7cb639f090d657be17df4ca6abef0426"></a><!-- doxytag: member="json.c::JsonEncode_ObjectClose" ref="g7cb639f090d657be17df4ca6abef0426" args="(JsonEncode_State *state, char *buf, int *remaining)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* JsonEncode_ObjectClose           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>remaining</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Close a JSON object. 
<p>
Adds a closing '}' to the string. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>A pointer to the <a class="el" href="struct_json_encode___state.html" title="The structure used to maintain the state of a JSON encode process.">JsonEncode_State</a> variable being used for this encode process. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>A pointer to the buffer which contains your JSON string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remaining</em>&nbsp;</td><td>A pointer to an integer keeping track of how many bytes are left in your JSON buffer. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A pointer to the location in the JSON buffer after this element has been added, or NULL if there was no room. </dd></dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00205">205</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g0824a3f7dbba8ecaa02b301b8221c315"></a><!-- doxytag: member="json.c::JsonEncode_ObjectKey" ref="g0824a3f7dbba8ecaa02b301b8221c315" args="(JsonEncode_State *state, char *buf, const char *key, int *remaining)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* JsonEncode_ObjectKey           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>remaining</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set the key for a JSON object. 
<p>
This is a convenience function that simply calls <a class="el" href="group__json.html#ge0f93189c206a35561ecfb5992a52aeb" title="Add a string to the current JSON string.">JsonEncode_String()</a>. It is provided to help enforce the idea that the first member of a JSON object pair must be a string. <dl class="see" compact><dt><b>See also:</b></dt><dd><a class="el" href="group__json.html#ge0f93189c206a35561ecfb5992a52aeb" title="Add a string to the current JSON string.">JsonEncode_String()</a> </dd></dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00192">192</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="g8d5bc99723b8f2d184cf2d10f3c0ef88"></a><!-- doxytag: member="json.c::JsonEncode_ObjectOpen" ref="g8d5bc99723b8f2d184cf2d10f3c0ef88" args="(JsonEncode_State *state, char *buf, int *remaining)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* JsonEncode_ObjectOpen           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>remaining</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Open up a new JSON object. 
<p>
This adds an opening '{' to the json string. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>A pointer to the <a class="el" href="struct_json_encode___state.html" title="The structure used to maintain the state of a JSON encode process.">JsonEncode_State</a> variable being used for this encode process. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>A pointer to the buffer holding the JSON string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remaining</em>&nbsp;</td><td>A pointer to the count of how many bytes are left in your JSON buffer. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A pointer to the location in the JSON buffer after this element has been added, or NULL if there was no room. </dd></dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00143">143</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
<a class="anchor" name="ge0f93189c206a35561ecfb5992a52aeb"></a><!-- doxytag: member="json.c::JsonEncode_String" ref="ge0f93189c206a35561ecfb5992a52aeb" args="(JsonEncode_State *state, char *buf, const char *string, int *remaining)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* JsonEncode_String           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_json_encode___state.html">JsonEncode_State</a> *&nbsp;</td>
          <td class="paramname"> <em>state</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&nbsp;</td>
          <td class="paramname"> <em>remaining</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Add a string to the current JSON string. 
<p>
Depending on whether you've opened objects, arrays, or other inserted other data, the approprate separating symbols will be added to the string.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>state</em>&nbsp;</td><td>A pointer to the <a class="el" href="struct_json_encode___state.html" title="The structure used to maintain the state of a JSON encode process.">JsonEncode_State</a> variable being used for this encode process. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buf</em>&nbsp;</td><td>A pointer to the buffer containing the JSON string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>The string to be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>remaining</em>&nbsp;</td><td>A pointer to the count of bytes remaining in the JSON buffer. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>A pointer to the JSON buffer after this element has been added, or NULL if there was no room. </dd></dl>

<p>Definition at line <a class="el" href="json_8c-source.html#l00295">295</a> of file <a class="el" href="json_8c-source.html">json.c</a>.</p>

</div>
</div><p>
</div>

<hr size="1">
<div>
  <p id="footer">The Make Controller Kit is an open source project maintained by <a href="http://www.makingthings.com">MakingThings</a>.<br />
    MakingThings code is released under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank">Apache 2.0 license</a>.<br />
    Bug tracker, development wiki and status can be found at <a href="http://dev.makingthings.com">http://dev.makingthings.com</a>.<br />
    This document was last updated on 18 May 2009.
  </p>
</div>
<!-- Google Analytics Code -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
_uacct = "UA-769030-1";
urchinTracker();
</script>
</body>
</html>
