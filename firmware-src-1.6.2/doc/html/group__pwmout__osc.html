<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <title>Make Controller Kit - Firmware API: PWM Out - OSC</title>
  <link href="mt_doxygen.css" rel="stylesheet" type="text/css" />
  <link href="../resources/mt_doxytabs.css" rel="stylesheet" type="text/css" />
</head>

<body>
  <div id="header">
    <a href="http://www.makingthings.com">
      <img src="../resources/logo.png" alt="MakingThings" border="0"/>
    </a>
    <form id='searchbox' method="get" action="http://www.google.com/search">
      <div align="right">
        <input type="text"   name="q" size="25" maxlength="255" value="" />
        <input type="submit" value="Search" />
        <input type="hidden" name="sitesearch" value="makingthings.com/ref/firmware/html" />
      </div>
    </form>
  </div>

<!-- Generated by Doxygen 1.5.8 -->
<script type="text/javascript">
<!--
function changeDisplayState (e){
  var num=this.id.replace(/[^[0-9]/g,'');
  var button=this.firstChild;
  var sectionDiv=document.getElementById('dynsection'+num);
  if (sectionDiv.style.display=='none'||sectionDiv.style.display==''){
    sectionDiv.style.display='block';
    button.src='open.gif';
  }else{
    sectionDiv.style.display='none';
    button.src='closed.gif';
  }
}
function initDynSections(){
  var divs=document.getElementsByTagName('div');
  var sectionCounter=1;
  for(var i=0;i<divs.length-1;i++){
    if(divs[i].className=='dynheader'&&divs[i+1].className=='dynsection'){
      var header=divs[i];
      var section=divs[i+1];
      var button=header.firstChild;
      if (button!='IMG'){
        divs[i].insertBefore(document.createTextNode(' '),divs[i].firstChild);
        button=document.createElement('img');
        divs[i].insertBefore(button,divs[i].firstChild);
      }
      header.style.cursor='pointer';
      header.onclick=changeDisplayState;
      header.id='dynheader'+sectionCounter;
      button.src='closed.gif';
      section.id='dynsection'+sectionCounter;
      section.style.display='none';
      section.style.marginLeft='14px';
      sectionCounter++;
    }
  }
}
window.onload = initDynSections;
-->
</script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>PWM Out - OSC<br>
<small>
[<a class="el" href="group___o_s_c.html">OSC</a>]</small>
</h1>Generate PWM signals with the Application Board via OSC.  
<a href="#_details">More...</a>
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
</table>
Generate PWM signals with the Application Board via OSC. 
<p>
<h2><a class="anchor" name="devices">
Devices</a></h2>
There are 4 PWM controllers available on the Application Board, numbered 0 - 3.<p>
Each PWM Out controls a pair of Digital Outs - an A and a B channel:<ul>
<li>PwmOut 0 - Digital Outs 0 (A) and 1 (B).</li><li>PwmOut 1 - Digital Outs 2 (A) and 3 (B).</li><li>PwmOut 2 - Digital Outs 4 (A) and 5 (B).</li><li>PwmOut 3 - Digital Outs 6 (A) and 7 (B).</li></ul>
<p>
Each channel can also be set to invert the given PWM signal.<h2><a class="anchor" name="properties">
Properties</a></h2>
Each PWM Out has the following properties:<ul>
<li>duty</li><li>invA</li><li>invB</li><li>active</li><li>dividerAValue</li><li>dividerAMux</li><li>dividerBValue</li><li>dividerBMux</li><li>clockSource</li><li>alignment</li><li>polarity</li></ul>
<h3><a class="anchor" name="Duty">
Duty</a></h3>
The <b>duty</b> property corresponds to the duty at which a load connected to the output is being driven. This value can be both read and written. The range of values expected by the board is from 0 - 1023.<p>
To generate a 75% on PWM signal, send a message like <div class="fragment"><pre class="fragment">/pwmout/1/duty 768 </pre></div> Leave the argument value off to read the duty: <div class="fragment"><pre class="fragment">/pwmout/1/duty </pre></div><h3><a class="anchor" name="invA">
invA</a></h3>
The <b>invA</b> property corresponds to the inversion of the A channel of a PWM Out. This value can be both read and written, and the range of values expected is simply 0 or 1. 1 means inverted and 0 means normal. 0 is the default.<p>
To set the A channel of the second PWM Out as inverted, send the message <div class="fragment"><pre class="fragment">/pwmout/1/invA 1 </pre></div> Note that the A channel of PWM Out 1 is Digital Out 2.<h3><a class="anchor" name="invB">
invB</a></h3>
The <b>invB</b> property corresponds to the inversion of the B channel of a PWM Out. This value can be both read and written, and the range of values expected is simply 0 or 1. 1 means inverted and 0 means normal. 0 is the default.<p>
To set the B channel of the fourth PWM Out back to normal, send the message <div class="fragment"><pre class="fragment">/pwmout/1/invB 0 </pre></div> Note that the A channel of PWM Out 1 is Digital Out 7.<h3><a class="anchor" name="Active">
Active</a></h3>
The <b>active</b> property corresponds to the active state of the PWM Out. If the device is set to be active, no other tasks will be able to use its 2 digital out lines. If you're not seeing appropriate responses to your messages to the PWM Out, check the whether it's locked by sending a message like <div class="fragment"><pre class="fragment">/pwmout/0/active </pre></div><p>
If you're no longer using the PWM Out, it's a good idea to free the 2 Digital Outs by sending the message <div class="fragment"><pre class="fragment">/pwmout/0/active 0 </pre></div><h2><a class="anchor" name="p_adjust">
Period adjustment of the PWM unit</a></h2>
The below values allow you to adjust the period length to all possible values as supported by the physical limits of the Make Controller. Before altering the values, it is good to understand a little about the subsustem of the PWM module. Please see the general introduction in the <a class="el" href="group___pwm.html">PWM (Pulse Width Modulation)</a> section.<h3><a class="anchor" name="DividerBValue">
DividerBValue</a></h3>
The <b>dividerXValue</b> property corresponds to the linear divider value within clock divider module X of the PWM Out. This value can be between 0 and 255, and linearly divides the clock that is fed into it. You can change the incomming clock value by altering the DividerAMux parameter. Higher linear divider values mean a longer period.<p>
Default value of DividerA is 4. Default value of DividerB is 0.<h3><a class="anchor" name="divs">
DividerAMux &amp; DividerBMux</a></h3>
The <b>dividerAMux</b> and <b>dividerBMux</b> properties select the incoming clock value for divider module A or B (respectively) of the PWM Out. This value ranges between 0 and 10. This is similar to the clock source value, eg. a DividerAMux value of 5 = a clock rate of MasterClock/(2^5)<p>
Increasing this value will substantially increase the period of the PWM. Use the DividerXValue parameter to more finely tune the value of the period.<p>
Default value of MuxA is 4. Default value of MuxB is 0.<h3><a class="anchor" name="ClockSource">
ClockSource</a></h3>
The <b>clockSource</b> property selects the incoming clock value for the specified PWM channel. A clock source of <b>0-10</b> represents the Master clock divided by 2 to the power of the Clock Source Value, eg. a clock source value of 5 = a clock rate of MasterClock/(2^5). A value of <b>11</b> sets the Clock source to be generated by clock Divider A. A value of <b>12</b> sets the Clock source to be generated by clock Divider B<p>
The default value is 11 (Divider A).<h3><a class="anchor" name="WaveformAlignment">
WaveformAlignment</a></h3>
The <b>waveformAlignment</b> property chooses whether the channel is left aligned or center aligned. The following values are valid:<ul>
<li>0 = Left aligned</li><li>1 = Center aligned</li></ul>
<p>
A left aligned channel counts up to the maximum duty cycle, then resets the counter. A center aligned channel counts up to the maximum duty cycle, then counts down to zero, etc. The default is left aligned.<h3><a class="anchor" name="WaveformPolarity">
WaveformPolarity</a></h3>
The <b>polarity</b> property chooses whether the channel begins its period high or low. The following values are valid:<ul>
<li>0 = Normal Polarity</li><li>1 = Inverted Polarity</li></ul>
<p>
Normal polarity starts low, then goes high. Inverted polarity starts high, then goes low. The default is inverted polarity. </div>

<hr size="1">
<div>
  <p id="footer">The Make Controller Kit is an open source project maintained by <a href="http://www.makingthings.com">MakingThings</a>.<br />
    MakingThings code is released under the <a href="http://www.apache.org/licenses/LICENSE-2.0.html" target="_blank">Apache 2.0 license</a>.<br />
    Bug tracker, development wiki and status can be found at <a href="http://dev.makingthings.com">http://dev.makingthings.com</a>.<br />
    This document was last updated on 18 May 2009.
  </p>
</div>
<!-- Google Analytics Code -->
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
_uacct = "UA-769030-1";
urchinTracker();
</script>
</body>
</html>
